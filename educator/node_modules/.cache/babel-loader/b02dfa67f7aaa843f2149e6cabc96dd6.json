{"ast":null,"code":"// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license.\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { Context, OS, SpeakerIdMessageAdapter, SpeakerRecognitionConfig } from \"../common.speech/Exports\";\nimport { Contracts } from \"./Contracts\";\nimport { PropertyId, ResultReason, SpeakerIdentificationModel, SpeakerRecognitionResult, SpeakerRecognitionResultType, SpeakerVerificationModel } from \"./Exports\";\n/**\r\n * Defines SpeakerRecognizer class for Speaker Recognition\r\n * Handles operations from user for Voice Profile operations (e.g. createProfile, deleteProfile)\r\n * @class SpeakerRecognizer\r\n */\n\nexport class SpeakerRecognizer {\n  /**\r\n   * SpeakerRecognizer constructor.\r\n   * @constructor\r\n   * @param {SpeechConfig} speechConfig - An set of initial properties for this recognizer (authentication key, region, &c)\r\n   */\n  constructor(speechConfig, audioConfig) {\n    const speechConfigImpl = speechConfig;\n    Contracts.throwIfNull(speechConfigImpl, \"speechConfig\");\n    this.privAudioConfigImpl = audioConfig;\n    Contracts.throwIfNull(this.privAudioConfigImpl, \"audioConfig\");\n    this.privProperties = speechConfigImpl.properties.clone();\n    this.implSRSetup();\n  }\n  /**\r\n   * Gets the authorization token used to communicate with the service.\r\n   * @member SpeakerRecognizer.prototype.authorizationToken\r\n   * @function\r\n   * @public\r\n   * @returns {string} Authorization token.\r\n   */\n\n\n  get authorizationToken() {\n    return this.properties.getProperty(PropertyId.SpeechServiceAuthorization_Token);\n  }\n  /**\r\n   * Gets/Sets the authorization token used to communicate with the service.\r\n   * @member SpeakerRecognizer.prototype.authorizationToken\r\n   * @function\r\n   * @public\r\n   * @param {string} token - Authorization token.\r\n   */\n\n\n  set authorizationToken(token) {\n    Contracts.throwIfNullOrWhitespace(token, \"token\");\n    this.properties.setProperty(PropertyId.SpeechServiceAuthorization_Token, token);\n  }\n  /**\r\n   * The collection of properties and their values defined for this SpeakerRecognizer.\r\n   * @member SpeakerRecognizer.prototype.properties\r\n   * @function\r\n   * @public\r\n   * @returns {PropertyCollection} The collection of properties and their values defined for this SpeakerRecognizer.\r\n   */\n\n\n  get properties() {\n    return this.privProperties;\n  }\n  /**\r\n   * Get recognition result for model using given audio\r\n   * @member SpeakerRecognizer.prototype.recognizeOnceAsync\r\n   * @function\r\n   * @public\r\n   * @async\r\n   * @param {SpeakerIdentificationModel} model Model containing Voice Profiles to be identified\r\n   * @param cb - Callback invoked once result is returned.\r\n   * @param err - Callback invoked in case of an error.\r\n   */\n\n\n  recognizeOnceAsync(model) {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (model instanceof SpeakerIdentificationModel) {\n        const responsePromise = this.privAdapter.identifySpeaker(model, this.privAudioConfigImpl);\n        return this.getResult(responsePromise, SpeakerRecognitionResultType.Identify, undefined);\n      } else if (model instanceof SpeakerVerificationModel) {\n        const responsePromise = this.privAdapter.verifySpeaker(model, this.privAudioConfigImpl);\n        return this.getResult(responsePromise, SpeakerRecognitionResultType.Verify, model.voiceProfile.profileId);\n      } else {\n        throw new Error(\"SpeakerRecognizer.recognizeOnce: Unexpected model type\");\n      }\n    });\n  }\n  /**\r\n   * Included for compatibility\r\n   * @member SpeakerRecognizer.prototype.close\r\n   * @function\r\n   * @public\r\n   */\n\n\n  close() {\n    return;\n  } // Does class setup, swiped from Recognizer.\n\n\n  implSRSetup() {\n    let osPlatform = typeof window !== \"undefined\" ? \"Browser\" : \"Node\";\n    let osName = \"unknown\";\n    let osVersion = \"unknown\";\n\n    if (typeof navigator !== \"undefined\") {\n      osPlatform = osPlatform + \"/\" + navigator.platform;\n      osName = navigator.userAgent;\n      osVersion = navigator.appVersion;\n    }\n\n    const recognizerConfig = new SpeakerRecognitionConfig(new Context(new OS(osPlatform, osName, osVersion)), this.privProperties);\n    this.privAdapter = new SpeakerIdMessageAdapter(recognizerConfig);\n  }\n\n  getResult(responsePromise, resultType, profileId) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const response = yield responsePromise;\n      return new SpeakerRecognitionResult(resultType, response.data, profileId, response.ok ? ResultReason.RecognizedSpeaker : ResultReason.Canceled);\n    });\n  }\n\n}","map":{"version":3,"mappings":"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","names":["Context","OS","SpeakerIdMessageAdapter","SpeakerRecognitionConfig","Contracts","PropertyId","ResultReason","SpeakerIdentificationModel","SpeakerRecognitionResult","SpeakerRecognitionResultType","SpeakerVerificationModel","SpeakerRecognizer","constructor","speechConfig","audioConfig","speechConfigImpl","throwIfNull","privAudioConfigImpl","privProperties","properties","clone","implSRSetup","authorizationToken","getProperty","SpeechServiceAuthorization_Token","token","throwIfNullOrWhitespace","setProperty","recognizeOnceAsync","model","responsePromise","privAdapter","identifySpeaker","getResult","Identify","undefined","verifySpeaker","Verify","voiceProfile","profileId","Error","close","osPlatform","window","osName","osVersion","navigator","platform","userAgent","appVersion","recognizerConfig","resultType","response","data","ok","RecognizedSpeaker","Canceled"],"sources":["C:\\Users\\ozgur\\Documents\\VSCodeProjects\\webapp_educator\\educator\\node_modules\\microsoft-cognitiveservices-speech-sdk\\distrib\\es2015\\src\\sdk\\src\\sdk\\SpeakerRecognizer.ts"],"sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license.\r\n\r\nimport {\r\n    IRestResponse,\r\n} from \"../common.browser/Exports\";\r\nimport {\r\n    Context,\r\n    OS,\r\n    SpeakerIdMessageAdapter,\r\n    SpeakerRecognitionConfig,\r\n} from \"../common.speech/Exports\";\r\nimport { marshalPromiseToCallbacks } from \"../common/Exports\";\r\nimport { AudioConfig, AudioConfigImpl } from \"./Audio/AudioConfig\";\r\nimport { Contracts } from \"./Contracts\";\r\nimport {\r\n    PropertyCollection,\r\n    PropertyId,\r\n    ResultReason,\r\n    SpeakerIdentificationModel,\r\n    SpeakerRecognitionResult,\r\n    SpeakerRecognitionResultType,\r\n    SpeakerVerificationModel,\r\n} from \"./Exports\";\r\nimport { SpeechConfig, SpeechConfigImpl } from \"./SpeechConfig\";\r\n\r\n/**\r\n * Defines SpeakerRecognizer class for Speaker Recognition\r\n * Handles operations from user for Voice Profile operations (e.g. createProfile, deleteProfile)\r\n * @class SpeakerRecognizer\r\n */\r\nexport class SpeakerRecognizer {\r\n    protected privProperties: PropertyCollection;\r\n    private privAdapter: SpeakerIdMessageAdapter;\r\n    private privAudioConfigImpl: AudioConfigImpl;\r\n\r\n    /**\r\n     * Gets the authorization token used to communicate with the service.\r\n     * @member SpeakerRecognizer.prototype.authorizationToken\r\n     * @function\r\n     * @public\r\n     * @returns {string} Authorization token.\r\n     */\r\n    public get authorizationToken(): string {\r\n        return this.properties.getProperty(PropertyId.SpeechServiceAuthorization_Token);\r\n    }\r\n\r\n    /**\r\n     * Gets/Sets the authorization token used to communicate with the service.\r\n     * @member SpeakerRecognizer.prototype.authorizationToken\r\n     * @function\r\n     * @public\r\n     * @param {string} token - Authorization token.\r\n     */\r\n    public set authorizationToken(token: string) {\r\n        Contracts.throwIfNullOrWhitespace(token, \"token\");\r\n        this.properties.setProperty(PropertyId.SpeechServiceAuthorization_Token, token);\r\n    }\r\n\r\n    /**\r\n     * The collection of properties and their values defined for this SpeakerRecognizer.\r\n     * @member SpeakerRecognizer.prototype.properties\r\n     * @function\r\n     * @public\r\n     * @returns {PropertyCollection} The collection of properties and their values defined for this SpeakerRecognizer.\r\n     */\r\n    public get properties(): PropertyCollection {\r\n        return this.privProperties;\r\n    }\r\n\r\n    /**\r\n     * SpeakerRecognizer constructor.\r\n     * @constructor\r\n     * @param {SpeechConfig} speechConfig - An set of initial properties for this recognizer (authentication key, region, &c)\r\n     */\r\n    public constructor(speechConfig: SpeechConfig, audioConfig: AudioConfig) {\r\n        const speechConfigImpl: SpeechConfigImpl = speechConfig as SpeechConfigImpl;\r\n        Contracts.throwIfNull(speechConfigImpl, \"speechConfig\");\r\n\r\n        this.privAudioConfigImpl = audioConfig as AudioConfigImpl;\r\n        Contracts.throwIfNull(this.privAudioConfigImpl, \"audioConfig\");\r\n\r\n        this.privProperties = speechConfigImpl.properties.clone();\r\n        this.implSRSetup();\r\n    }\r\n\r\n    /**\r\n     * Get recognition result for model using given audio\r\n     * @member SpeakerRecognizer.prototype.recognizeOnceAsync\r\n     * @function\r\n     * @public\r\n     * @async\r\n     * @param {SpeakerIdentificationModel} model Model containing Voice Profiles to be identified\r\n     * @param cb - Callback invoked once result is returned.\r\n     * @param err - Callback invoked in case of an error.\r\n     */\r\n    public async recognizeOnceAsync(model: SpeakerIdentificationModel | SpeakerVerificationModel): Promise<SpeakerRecognitionResult> {\r\n\r\n        if (model instanceof SpeakerIdentificationModel) {\r\n            const responsePromise: Promise<IRestResponse> = this.privAdapter.identifySpeaker(model, this.privAudioConfigImpl);\r\n            return this.getResult(responsePromise, SpeakerRecognitionResultType.Identify, undefined);\r\n        } else if (model instanceof SpeakerVerificationModel) {\r\n            const responsePromise: Promise<IRestResponse> = this.privAdapter.verifySpeaker(model, this.privAudioConfigImpl);\r\n            return this.getResult(responsePromise, SpeakerRecognitionResultType.Verify, model.voiceProfile.profileId);\r\n        } else {\r\n            throw new Error(\"SpeakerRecognizer.recognizeOnce: Unexpected model type\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Included for compatibility\r\n     * @member SpeakerRecognizer.prototype.close\r\n     * @function\r\n     * @public\r\n     */\r\n    public close(): void {\r\n        return;\r\n    }\r\n\r\n    // Does class setup, swiped from Recognizer.\r\n    private implSRSetup(): void {\r\n\r\n        let osPlatform = (typeof window !== \"undefined\") ? \"Browser\" : \"Node\";\r\n        let osName = \"unknown\";\r\n        let osVersion = \"unknown\";\r\n\r\n        if (typeof navigator !== \"undefined\") {\r\n            osPlatform = osPlatform + \"/\" + navigator.platform;\r\n            osName = navigator.userAgent;\r\n            osVersion = navigator.appVersion;\r\n        }\r\n\r\n        const recognizerConfig =\r\n            new SpeakerRecognitionConfig(\r\n                new Context(new OS(osPlatform, osName, osVersion)),\r\n                this.privProperties);\r\n\r\n        this.privAdapter = new SpeakerIdMessageAdapter(recognizerConfig);\r\n    }\r\n\r\n    private async getResult(responsePromise: Promise<IRestResponse>, resultType: SpeakerRecognitionResultType, profileId?: string): Promise<SpeakerRecognitionResult> {\r\n        const response: IRestResponse = await responsePromise;\r\n        return new SpeakerRecognitionResult(\r\n            resultType,\r\n            response.data,\r\n            profileId,\r\n            response.ok ? ResultReason.RecognizedSpeaker : ResultReason.Canceled,\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}