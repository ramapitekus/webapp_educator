{"ast":null,"code":"// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license.\nimport { CancellationErrorCodePropertyName } from \"../common.speech/Exports\";\nimport { Contracts } from \"./Contracts\";\nimport { CancellationDetailsBase, CancellationErrorCode, CancellationReason, PropertyCollection, PropertyId, ResultReason } from \"./Exports\";\nexport var SpeakerRecognitionResultType;\n\n(function (SpeakerRecognitionResultType) {\n  SpeakerRecognitionResultType[SpeakerRecognitionResultType[\"Verify\"] = 0] = \"Verify\";\n  SpeakerRecognitionResultType[SpeakerRecognitionResultType[\"Identify\"] = 1] = \"Identify\";\n})(SpeakerRecognitionResultType || (SpeakerRecognitionResultType = {}));\n/**\n * Output format\n * @class SpeakerRecognitionResult\n */\n\n\nexport class SpeakerRecognitionResult {\n  constructor(resultType, data, profileId) {\n    let resultReason = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : ResultReason.RecognizedSpeaker;\n    this.privProperties = new PropertyCollection();\n    this.privReason = resultReason;\n\n    if (this.privReason !== ResultReason.Canceled) {\n      if (resultType === SpeakerRecognitionResultType.Identify) {\n        const json = JSON.parse(data);\n        Contracts.throwIfNullOrUndefined(json, \"JSON\");\n        this.privProfileId = json.identifiedProfile.profileId;\n        this.privScore = json.identifiedProfile.score;\n      } else {\n        const json = JSON.parse(data);\n        Contracts.throwIfNullOrUndefined(json, \"JSON\");\n        this.privScore = json.score;\n\n        if (json.recognitionResult.toLowerCase() !== \"accept\") {\n          this.privReason = ResultReason.NoMatch;\n        }\n\n        if (profileId !== undefined && profileId !== \"\") {\n          this.privProfileId = profileId;\n        }\n      }\n    } else {\n      const json = JSON.parse(data);\n      Contracts.throwIfNullOrUndefined(json, \"JSON\");\n      this.privErrorDetails = json.statusText;\n      this.privProperties.setProperty(CancellationErrorCodePropertyName, CancellationErrorCode[CancellationErrorCode.ServiceError]);\n    }\n\n    this.privProperties.setProperty(PropertyId.SpeechServiceResponse_JsonResult, data);\n  }\n\n  get properties() {\n    return this.privProperties;\n  }\n\n  get reason() {\n    return this.privReason;\n  }\n\n  get profileId() {\n    return this.privProfileId;\n  }\n\n  get errorDetails() {\n    return this.privErrorDetails;\n  }\n\n  get score() {\n    return this.privScore;\n  }\n\n}\n/**\n * @class SpeakerRecognitionCancellationDetails\n */\n// tslint:disable-next-line:max-classes-per-file\n\nexport class SpeakerRecognitionCancellationDetails extends CancellationDetailsBase {\n  constructor(reason, errorDetails, errorCode) {\n    super(reason, errorDetails, errorCode);\n  }\n  /**\n   * Creates an instance of SpeakerRecognitionCancellationDetails object for the canceled SpeakerRecognitionResult\n   * @member SpeakerRecognitionCancellationDetails.fromResult\n   * @function\n   * @public\n   * @param {SpeakerRecognitionResult} result - The result that was canceled.\n   * @returns {SpeakerRecognitionCancellationDetails} The cancellation details object being created.\n   */\n\n\n  static fromResult(result) {\n    const reason = CancellationReason.Error;\n    let errorCode = CancellationErrorCode.NoError;\n\n    if (!!result.properties) {\n      errorCode = CancellationErrorCode[result.properties.getProperty(CancellationErrorCodePropertyName, CancellationErrorCode[CancellationErrorCode.NoError])];\n    }\n\n    return new SpeakerRecognitionCancellationDetails(reason, result.errorDetails, errorCode);\n  }\n\n}","map":{"version":3,"mappings":"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","names":["CancellationErrorCodePropertyName","Contracts","CancellationDetailsBase","CancellationErrorCode","CancellationReason","PropertyCollection","PropertyId","ResultReason","SpeakerRecognitionResultType","SpeakerRecognitionResult","constructor","resultType","data","profileId","resultReason","RecognizedSpeaker","privProperties","privReason","Canceled","Identify","json","JSON","parse","throwIfNullOrUndefined","privProfileId","identifiedProfile","privScore","score","recognitionResult","toLowerCase","NoMatch","undefined","privErrorDetails","statusText","setProperty","ServiceError","SpeechServiceResponse_JsonResult","properties","reason","errorDetails","SpeakerRecognitionCancellationDetails","errorCode","fromResult","result","Error","NoError","getProperty"],"sources":["C:\\Users\\olesr\\OneDrive\\Documents\\webapp_educ\\educator\\node_modules\\microsoft-cognitiveservices-speech-sdk\\distrib\\es2015\\src\\sdk\\src\\sdk\\SpeakerRecognitionResult.ts"],"sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license.\r\n\r\nimport { CancellationErrorCodePropertyName } from \"../common.speech/Exports\";\r\nimport { Contracts } from \"./Contracts\";\r\nimport {\r\n    CancellationDetailsBase,\r\n    CancellationErrorCode,\r\n    CancellationReason,\r\n    PropertyCollection,\r\n    PropertyId,\r\n    ResultReason,\r\n} from \"./Exports\";\r\n\r\nexport enum SpeakerRecognitionResultType {\r\n    Verify,\r\n    Identify\r\n}\r\n/**\r\n * Output format\r\n * @class SpeakerRecognitionResult\r\n */\r\nexport class SpeakerRecognitionResult {\r\n    private privReason: ResultReason;\r\n    private privProperties: PropertyCollection;\r\n    private privProfileId: string;\r\n    private privScore: number;\r\n    private privErrorDetails: string;\r\n\r\n    public constructor(resultType: SpeakerRecognitionResultType, data: string, profileId: string, resultReason: ResultReason = ResultReason.RecognizedSpeaker) {\r\n        this.privProperties = new PropertyCollection();\r\n        this.privReason = resultReason;\r\n        if (this.privReason !== ResultReason.Canceled) {\r\n            if (resultType === SpeakerRecognitionResultType.Identify) {\r\n                const json: { identifiedProfile: { profileId: string, score: number } } = JSON.parse(data);\r\n                Contracts.throwIfNullOrUndefined(json, \"JSON\");\r\n                this.privProfileId = json.identifiedProfile.profileId;\r\n                this.privScore = json.identifiedProfile.score;\r\n            } else {\r\n                const json: { recognitionResult: string, score: number } = JSON.parse(data);\r\n                Contracts.throwIfNullOrUndefined(json, \"JSON\");\r\n                this.privScore = json.score;\r\n                if (json.recognitionResult.toLowerCase() !== \"accept\") {\r\n                    this.privReason = ResultReason.NoMatch;\r\n                }\r\n                if (profileId !== undefined && profileId !== \"\") {\r\n                    this.privProfileId = profileId;\r\n                }\r\n            }\r\n        } else {\r\n            const json: { statusText: string } = JSON.parse(data);\r\n            Contracts.throwIfNullOrUndefined(json, \"JSON\");\r\n            this.privErrorDetails = json.statusText;\r\n            this.privProperties.setProperty(CancellationErrorCodePropertyName, CancellationErrorCode[CancellationErrorCode.ServiceError]);\r\n        }\r\n        this.privProperties.setProperty(PropertyId.SpeechServiceResponse_JsonResult, data);\r\n    }\r\n\r\n    public get properties(): PropertyCollection {\r\n        return this.privProperties;\r\n    }\r\n\r\n    public get reason(): ResultReason {\r\n        return this.privReason;\r\n    }\r\n\r\n    public get profileId(): string {\r\n        return this.privProfileId;\r\n    }\r\n\r\n    public get errorDetails(): string {\r\n        return this.privErrorDetails;\r\n    }\r\n\r\n    public get score(): number {\r\n        return this.privScore;\r\n    }\r\n}\r\n\r\n/**\r\n * @class SpeakerRecognitionCancellationDetails\r\n */\r\n// tslint:disable-next-line:max-classes-per-file\r\nexport class SpeakerRecognitionCancellationDetails extends CancellationDetailsBase {\r\n\r\n    private constructor(reason: CancellationReason, errorDetails: string, errorCode: CancellationErrorCode) {\r\n        super(reason, errorDetails, errorCode);\r\n    }\r\n\r\n    /**\r\n     * Creates an instance of SpeakerRecognitionCancellationDetails object for the canceled SpeakerRecognitionResult\r\n     * @member SpeakerRecognitionCancellationDetails.fromResult\r\n     * @function\r\n     * @public\r\n     * @param {SpeakerRecognitionResult} result - The result that was canceled.\r\n     * @returns {SpeakerRecognitionCancellationDetails} The cancellation details object being created.\r\n     */\r\n    public static fromResult(result: SpeakerRecognitionResult): SpeakerRecognitionCancellationDetails {\r\n        const reason = CancellationReason.Error;\r\n        let errorCode: CancellationErrorCode = CancellationErrorCode.NoError;\r\n\r\n        if (!!result.properties) {\r\n            errorCode = (CancellationErrorCode as any)[result.properties.getProperty(CancellationErrorCodePropertyName, CancellationErrorCode[CancellationErrorCode.NoError])];\r\n        }\r\n\r\n        return new SpeakerRecognitionCancellationDetails(reason, result.errorDetails, errorCode);\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}